<!DOCTYPE html>
<html lang="en">
<head>
    <title lang="en">chou.ninja</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .block {
            width: 30%;
            border-width: medium;
            font-size: x-large;
            margin-bottom: inherit;
            background-color: aliceblue;
            font-weight: bold;
            height: 5em;
            vertical-align: middle;
        }
        body {
            text-align: center;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
      $(window).on('load', function() {
        main();
      });

      function constructDayOfMonthHTML(number) {
          var button = $("<button />")
            .attr("lang", "ja")
            .addClass("block")
            .text(number + "日")
            .click(function() {
              play(number);
            });

          var source = $("<source />")
            .attr("src", "https://px0asnk62c.execute-api.ap-northeast-1.amazonaws.com/prod/day-of-month/" + number)
            .attr("type", "audio/mpeg");
          var audio = $("<audio />")
            .attr("id", "audio-digit-" + number)
            .attr("preload", "none")
            .append(source);
          $("body").append(button, audio);
      }

      function main() {
        for (var digit = 1; digit <= 10; digit++) {
          constructDayOfMonthHTML(digit);
        }
      }

      var dummyAudio = $("<audio />")[0];
      var prevAudio = dummyAudio;
      function play(digit) {
        prevAudio.pause();
        prevAudio.currentTime = 0;

        var currAudio = $("#audio-digit-" + digit)[0];
        currAudio.play();
        prevAudio = currAudio;
      }
    </script>
</head>
<body>

<h1 lang="ja">聴忍者</h1>

</body>
</html>
